---
title: Installation Guide
description: Running on your system in just a few minutes.
---

Get Kompose up and running on your system in just a few minutes.

## Prerequisites

Before installing Kompose, make sure you have the following installed:

### Required

- **Bash** 4.0 or higher
- **Docker** 20.10 or higher
- **Docker Compose** v2.0 or higher
- **Git** (for cloning the repository)

### Optional (for Development)

- **Node.js** 18+ and **pnpm** (for _docs and kmps development)
- **Python 3** (for REST API server)
- **PostgreSQL client tools** (for database operations)
- **curl** and **jq** (for API testing)

::code-group
```bash [Ubuntu/Debian]
# Required
sudo apt-get install git docker.io docker-compose

# Optional
sudo apt-get install nodejs npm postgresql-client curl jq
npm install -g pnpm
```

```bash [macOS]
# Required (via Homebrew)
brew install git
brew install --cask docker

# Optional
brew install node pnpm postgresql curl jq
```

```bash [Arch Linux]
# Required
sudo pacman -S git docker docker-compose

# Optional
sudo pacman -S nodejs npm postgresql curl jq
npm install -g pnpm
```
::

## Installation

### Method 1: Clone from Git (Recommended)

```bash
# Clone the repository
git clone https://code.pivoine.art/valknar/kompose.git

# Navigate to the directory
cd kompose

# Run the interactive initialization wizard
./kompose.sh init
```

::alert{type="success"}
The `init` command launches an interactive wizard that will guide you through the complete setup process.
::

### Method 2: Download Release

```bash
# Download the latest release
wget https://code.pivoine.art/valknar/kompose/archive/main.zip

# Extract
unzip main.zip && cd kompose-main

# Run initialization
./kompose.sh init
```

## Interactive Initialization

The `kompose.sh init` command provides a guided setup experience:

```bash
./kompose.sh init
```

**The wizard will:**

1. **Check Dependencies** - Verify Docker, Git, Node.js, pnpm, and Python 3
2. **Choose Environment** - Select local development, production, or both
3. **Configure Files** - Create .env, domain.env, and secrets.env
4. **Install Dependencies** - Run pnpm install for _docs and kmps projects
5. **Setup Docker** - Create the kompose Docker network
6. **Create Directories** - Set up backup and config directories

::alert{type="info"}
For detailed initialization information, see the [Initialization Guide](/guide/initialization).
::

### Quick Setup (Local Development)

For a fast local development setup, choose option 1 in the wizard:

```
Choose environment:
  1) Local Development (recommended) ✓
  2) Production
  3) Both

Choose (1/2/3) [1]: 1
```

This creates a development environment with:
- Services on localhost:PORT
- No domain configuration needed
- Development-friendly default passwords
- No SSL setup required

### Full Setup (Production)

For production deployment, choose option 2 or 3:

```
Choose (1/2/3) [1]: 2

Enter your root domain: example.com
Enter email for SSL certificates: admin@example.com
```

This configures:
- Domain-based routing
- Traefik reverse proxy with SSL
- Let's Encrypt certificates
- Production-ready security

## Modular Architecture

Kompose 2.0 uses a modular architecture for better maintainability:

```
kompose/
├── kompose.sh              # Main CLI entry point
├── kompose-setup.sh        # Setup and initialization
├── kompose-stack.sh        # Stack management functions
├── kompose-db.sh           # Database operations
├── kompose-tag.sh          # Git tag deployments
├── kompose-api.sh          # REST API server management
├── kompose-utils.sh        # Utility functions
├── kompose-api-server.sh   # REST API server
└── kompose-local.sh        # (DEPRECATED - now integrated into kompose.sh)
```

All modules are automatically loaded by `kompose.sh`, so you only need to interact with the main script.

::alert{type="info"}
**Note:** The `kompose-local.sh` standalone script is deprecated. All its functionality has been integrated into `kompose.sh setup` commands. The script now acts as a wrapper that forwards commands to the main CLI.
::

## Configuration Files

After initialization, you'll have:

```
kompose/
├── .env                    # Active environment configuration
├── .env.local              # Local development template
├── .env.production         # Production template (if configured)
├── domain.env              # Active domain configuration
├── domain.env.local        # Local domain template
├── domain.env.production   # Production domain template
├── secrets.env             # Credentials (never commit!)
└── secrets.env.template    # Secrets template
```

::alert{type="warning"}
Never commit `secrets.env` to version control! It contains sensitive credentials.
::

## Environment Modes

### Local Development Mode

Services available at localhost:

| Service | URL | Port |
|---------|-----|------|
| PostgreSQL | localhost:5432 | 5432 |
| Redis | localhost:6379 | 6379 |
| MQTT | localhost:1883 | 1883 |
| Keycloak | http://localhost:8180 | 8180 |
| KMPS Portal | http://localhost:3100 | 3100 |
| Gitea | http://localhost:3001 | 3001 |
| n8n | http://localhost:5678 | 5678 |

### Production Mode

Services available via subdomains:

| Service | URL |
|---------|-----|
| Keycloak | https://auth.yourdomain.com |
| KMPS Portal | https://manage.yourdomain.com |
| Gitea | https://code.yourdomain.com |
| n8n | https://chain.yourdomain.com |

## Switching Environments

Switch between local and production configurations:

```bash
# Switch to local development
./kompose.sh setup local

# Switch to production
./kompose.sh setup prod

# Check current mode
./kompose.sh setup status
```

::alert{type="info"}
See the [Environment Setup Guide](/guide/environment-setup) for detailed information about managing configurations.
::

## Verification

### Validate Configuration

Run the built-in validator:

```bash
./kompose.sh validate
```

This checks:
- Required files exist (domain.env, .env, secrets.env)
- Domain configuration is valid
- Docker network exists
- All compose files are valid
- Security settings (file permissions, .gitignore)

### List Available Stacks

```bash
./kompose.sh list
```

Expected output:
```
Available stacks:

  core        - Core services - MQTT, Redis, Postgres
  auth        - Authentication - Keycloak SSO, OAuth2 Proxy
  kmps        - Management Portal - User & SSO Administration
  chain       - Automation Platform - n8n workflows, Semaphore
  home        - Smart Home - Home Assistant, Matter, Zigbee
  vpn         - VPN - WireGuard remote access
  ...
```

### Test Basic Commands

```bash
# Start the core stack
./kompose.sh up core

# Check status
./kompose.sh status core

# View logs
./kompose.sh logs core -f
```

## Post-Installation

### Add to PATH (Optional)

For easier access, add Kompose to your PATH:

```bash
# Add to ~/.bashrc or ~/.zshrc
echo 'export PATH="$PATH:/path/to/kompose"' >> ~/.bashrc
source ~/.bashrc

# Now you can run from anywhere
kompose.sh --help
```

### Create Aliases (Optional)

Add helpful aliases to your shell configuration:

```bash
# Add to ~/.bashrc or ~/.zshrc
alias kp='kompose.sh'
alias kup='kompose.sh up'
alias kdown='kompose.sh down'
alias klogs='kompose.sh logs'
alias kps='kompose.sh ps'
alias kstatus='kompose.sh status'
```

### Enable API Server (Optional)

Start the REST API server for programmatic access:

```bash
# Start on default port (8080)
./kompose.sh api start

# Check status
./kompose.sh api status

# Test the API
curl http://localhost:8080/api/health
```

### Set Up Automated Backups (Optional)

Create a cron job for automatic database backups:

```bash
# Edit crontab
crontab -e

# Add daily backup at 2 AM
0 2 * * * cd /path/to/kompose && ./kompose.sh db backup --compress

# Add weekly cleanup (Sundays at 3 AM)  
0 3 * * 0 find /path/to/kompose/backups -name "*.sql.gz" -mtime +30 -delete
```

## New Features in 2.0

### Interactive Initialization Wizard

Guided setup with dependency checking and environment configuration:

```bash
./kompose.sh init
```

### Environment Management

Easy switching between local and production:

```bash
./kompose.sh setup local   # Development mode
./kompose.sh setup prod    # Production mode
./kompose.sh setup status  # Check current mode
```

### Integrated Utilities

All helper scripts are now integrated into kompose.sh:

```bash
./kompose.sh cleanup    # Clean up backup files
./kompose.sh validate   # Validate configuration
./kompose.sh init       # Initialize/re-initialize project
```

### REST API Server

Built-in REST API for automation and integration:

```bash
./kompose.sh api start                    # Start API server
curl http://localhost:8080/api/stacks     # List stacks
curl http://localhost:8080/api/db/status  # Database status
```

### Git Tag Deployments

Integrated deployment workflow with Git tags:

```bash
./kompose.sh tag deploy -s frontend -e prod -v 1.2.3
./kompose.sh tag rollback -s frontend -e prod -v 1.2.2
./kompose.sh tag list
```

## Troubleshooting

### Initialization Fails

**Dependencies missing:**
```bash
# Install required dependencies (see Prerequisites section)
# Then re-run:
./kompose.sh init
```

**Permission denied:**
```bash
chmod +x kompose.sh
./kompose.sh init
```

### Docker Network Already Exists

This is normal if you've run init before. The network is shared across all stacks.

### Module Loading Errors

```bash
# Verify all modules exist
ls -la kompose-*.sh

# Make executable
chmod +x kompose-*.sh

# Re-initialize
./kompose.sh init
```

### Configuration Validation Fails

```bash
# Run validator to see specific issues
./kompose.sh validate

# Follow suggested fixes in output
```

### pnpm Install Fails

```bash
# Install pnpm globally
npm install -g pnpm

# Manually install dependencies
cd _docs && pnpm install
cd ../kmps && pnpm install
```

## Next Steps

Now that Kompose is installed, you can:

::card-group
::card
---
title: Initialization Guide
icon: i-heroicons-rocket-launch
to: /guide/initialization
---
Detailed initialization walkthrough
::

::card
---
title: Quick Start Guide
icon: i-heroicons-play
to: /guide/quick-start
---
Start using Kompose right away
::

::card
---
title: Environment Setup
icon: i-heroicons-cog-6-tooth
to: /guide/environment-setup
---
Manage local and production modes
::

::card
---
title: Stack Management
icon: i-heroicons-squares-2x2
to: /guide/stack-management
---
Learn to manage your stacks
::
::

## Updating Kompose

To update to the latest version:

```bash
# Backup current configuration
./kompose.sh setup backup

# Pull latest changes
git pull origin main

# Re-initialize (updates scripts and checks)
./kompose.sh init

# Validate new version
./kompose.sh validate

# Restart affected stacks if needed
./kompose.sh restart
```

## Migrating from 1.x to 2.0

If you're upgrading from Kompose 1.x:

1. **Backup your current setup:**
   ```bash
   cp -r . ../kompose-1.x-backup
   ```

2. **Pull the latest version:**
   ```bash
   git pull origin main
   ```

3. **Run initialization:**
   ```bash
   ./kompose.sh init
   ```

4. **Validate configuration:**
   ```bash
   ./kompose.sh validate
   ```

5. **Update any custom scripts** to use the new command structure

::alert{type="info"}
Legacy scripts have been moved to `_migrations/` and `_archive/` directories for reference.
::

## Uninstallation

To completely remove Kompose:

```bash
# Stop all stacks
./kompose.sh down

# Stop API server if running
./kompose.sh api stop

# Remove Docker network
docker network rm kompose

# Remove Kompose directory
rm -rf /path/to/kompose

# (Optional) Remove from PATH
# Edit ~/.bashrc or ~/.zshrc and remove the PATH export
```

---

**Need Help?** Check out the [Troubleshooting Guide](/guide/troubleshooting) or [open an issue](https://code.pivoine.art/valknar/kompose/issues) on the git repository.
