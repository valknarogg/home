---
title: Installation Guide
description: Running on your system in just a few minutes.
---

Get Kompose up and running on your system in just a few minutes.

## Prerequisites

Before installing Kompose, make sure you have the following installed:

### Required

- **Bash** 4.0 or higher
- **Docker** 20.10 or higher
- **Docker Compose** v2.0 or higher
- **Git** (for cloning the repository)

### Optional

- **PostgreSQL client tools** (for database operations)
- **curl** (for API server and webhook triggers)
- **jq** (for JSON processing in API tests)

```bash
# Ubuntu/Debian
sudo apt-get install postgresql-client curl jq

# macOS
brew install postgresql curl jq

# Arch Linux
sudo pacman -S postgresql curl jq
```

## Installation

### Method 1: Clone from Git (Recommended)

```bash
# Clone the repository
git clone https://code.pivoine.art/valknar/kompose.git

# Navigate to the directory
cd kompose

# Initialize kompose (creates network, makes scripts executable)
./kompose.sh init

# Verify installation
./kompose.sh version
```

### Method 2: Download Release

```bash
# Download the latest release
wget https://code.pivoine.art/valknar/kompose/archive/main.zip

# Extract
unzip main.zip

# Navigate to directory
cd kompose-main

# Initialize kompose
./kompose.sh init
```

## Modular Architecture

Kompose 2.0 uses a modular architecture for better maintainability:

```
kompose/
├── kompose.sh          # Main CLI entry point
├── kompose-stack.sh    # Stack management functions
├── kompose-db.sh       # Database operations
├── kompose-tag.sh      # Git tag deployments
├── kompose-api.sh      # REST API server management
├── kompose-utils.sh    # Utility functions
└── kompose-api-server.sh  # REST API server
```

All modules are automatically loaded by `kompose.sh`, so you only need to interact with the main script.

## Initial Setup

### 1. Initialize Environment

The init command handles all initial setup:

```bash
./kompose.sh init
```

This will:
- Make all kompose scripts executable
- Create the Docker network `kompose`
- Prepare the environment for use

### 2. Configure Domain

Create and configure `domain.env` for centralized domain management:

```bash
# Copy example (if available)
cp domain.env.template domain.env

# Or create manually
nano domain.env
```

**Example `domain.env`:**

```env
# Root domain for all services
ROOT_DOMAIN=example.com

# Subdomains
SUBDOMAIN_PROXY=proxy
SUBDOMAIN_AUTH=auth
SUBDOMAIN_CHAIN=automation
SUBDOMAIN_CODE=code
SUBDOMAIN_HOME=home
SUBDOMAIN_VPN=vpn

# SSL/TLS
ACME_EMAIL=admin@example.com
SSL_PROVIDER=letsencrypt
```

### 3. Configure Secrets

Create `secrets.env` from the template:

```bash
cp secrets.env.template secrets.env
nano secrets.env
```

**Important:** Never commit `secrets.env` to version control!

### 4. Configure Root Environment

Edit the root `.env` file for global settings:

```bash
nano .env
```

This file sources both `domain.env` and `secrets.env` automatically.

## Verification

### Validate Configuration

Run the built-in validator:

```bash
./kompose.sh validate
```

This checks:
- Required files exist (domain.env, .env, secrets.env)
- Domain configuration is valid
- Docker network exists
- All compose files are valid
- No legacy/backup files present
- Security settings (file permissions, .gitignore)

### List Available Stacks

```bash
./kompose.sh list
```

Should output all discovered stacks with their status.

### Test Basic Commands

```bash
# Start the core stack
./kompose.sh up core

# Check status
./kompose.sh status core

# View logs
./kompose.sh logs core -f
```

## Post-Installation

### Add to PATH (Optional)

For easier access, add Kompose to your PATH:

```bash
# Add to ~/.bashrc or ~/.zshrc
echo 'export PATH="$PATH:/path/to/kompose"' >> ~/.bashrc
source ~/.bashrc

# Now you can run from anywhere
kompose.sh --help
```

### Create Aliases (Optional)

Add helpful aliases to your shell configuration:

```bash
# Add to ~/.bashrc or ~/.zshrc
alias kp='kompose.sh'
alias kup='kompose.sh up'
alias kdown='kompose.sh down'
alias klogs='kompose.sh logs'
alias kps='kompose.sh ps'
alias kstatus='kompose.sh status'
```

### Enable API Server (Optional)

Start the REST API server for programmatic access:

```bash
# Start on default port (8080)
./kompose.sh api start

# Or specify custom port
./kompose.sh api start 9000

# Check status
./kompose.sh api status

# Test the API
curl http://localhost:8080/api/health
```

### Set Up Automated Backups

Create a cron job for automatic database backups:

```bash
# Edit crontab
crontab -e

# Add daily backup at 2 AM
0 2 * * * cd /path/to/kompose && ./kompose.sh db backup --compress 2>&1 | tee -a backup.log

# Add weekly cleanup (Sundays at 3 AM)  
0 3 * * 0 find /path/to/kompose/backups -name "*.sql.gz" -mtime +30 -delete
```

## New Features in 2.0

### Integrated Utilities

All helper scripts are now integrated into kompose.sh:

```bash
# Clean up backup files (was: ./cleanup-project.sh)
./kompose.sh cleanup

# Validate configuration (was: ./validate-config.sh)
./kompose.sh validate

# Make scripts executable (was: ./make-all-executable.sh)
./kompose.sh init
```

### REST API Server

Built-in REST API for automation and integration:

```bash
# Start API server
./kompose.sh api start

# Check API endpoints
curl http://localhost:8080/api/stacks
curl http://localhost:8080/api/db/status
curl http://localhost:8080/api/tag/list
```

### Git Tag Deployments

Integrated deployment workflow with Git tags:

```bash
# Create and deploy a tagged version
./kompose.sh tag deploy -s frontend -e prod -v 1.2.3

# Rollback to previous version
./kompose.sh tag rollback -s frontend -e prod -v 1.2.2

# List deployment tags
./kompose.sh tag list
```

## Troubleshooting

### Permission Denied

If you get a "Permission denied" error:

```bash
./kompose.sh init
```

This makes all scripts executable.

### Docker Network Already Exists

This is normal if you've run `kompose.sh init` before. The network is shared across all stacks.

### Module Loading Errors

If you see errors about missing modules:

```bash
# Check all module files exist
ls -la kompose-*.sh

# Verify they're executable
chmod +x kompose-*.sh

# Re-initialize
./kompose.sh init
```

### Configuration Validation Fails

Run the validator to see specific issues:

```bash
./kompose.sh validate
```

Follow the suggested fixes in the output.

## Next Steps

Now that Kompose is installed, you can:

1. [Start with the Quick Start Guide](/guide/quick-start)
2. [Learn about Stack Management](/guide/stack-management)
3. [Explore Database Operations](/guide/database)
4. [Set up the REST API Server](/guide/api-server)
5. [Configure Git Tag Deployments](/guide/deployment-checklist)

## Updating Kompose

To update to the latest version:

```bash
# Navigate to Kompose directory
cd /path/to/kompose

# Backup current configuration
cp .env .env.backup
cp secrets.env secrets.env.backup

# Pull latest changes
git pull origin main

# Re-initialize (updates scripts)
./kompose.sh init

# Validate new version
./kompose.sh validate

# Restart affected stacks if needed
./kompose.sh restart
```

## Migrating from 1.x to 2.0

If you're upgrading from Kompose 1.x, the new modular structure is backward compatible. Your existing stacks will continue to work.

**Migration steps:**

1. Backup your current setup
2. Pull the latest version
3. Run `./kompose.sh init`
4. Run `./kompose.sh validate` to check for issues
5. Update any custom scripts to use the new command structure

**Legacy scripts** have been moved to `_migrations/` and `_archive/` directories for reference.

## Uninstallation

To completely remove Kompose:

```bash
# Stop all stacks
./kompose.sh down

# Stop API server if running
./kompose.sh api stop

# Remove Docker network
docker network rm kompose

# Remove Kompose directory
rm -rf /path/to/kompose

# (Optional) Remove from PATH
# Edit ~/.bashrc or ~/.zshrc and remove the PATH export
```

---

**Need Help?** Check out the [Troubleshooting Guide](/guide/troubleshooting) or [open an issue](https://code.pivoine.art/valknar/kompose/issues) on the git repository.
