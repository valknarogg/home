---
title: Introduction to Kompose
description: Learn about Kompose, your Docker Compose Symphony Conductor for managing multiple stacks with style and grace.
---

**Kompose** is a powerful Bash orchestration tool for managing multiple Docker Compose stacks with style and grace. Think of it as a conductor for your Docker symphony - each stack plays its part, and Kompose makes sure they're all in harmony.

::callout{icon="i-heroicons-light-bulb" color="amber"}
**Version 2.0** introduces a modular architecture for better maintainability and extensibility!
::

## Why Kompose?

:icon{name="lucide:target"} **One Command to Rule Them All** - Manage dozens of stacks with a single, intuitive CLI

:icon{name="lucide:server"} **REST API Server** - Control stacks remotely via HTTP JSON API - perfect for web dashboards

:icon{name="lucide:git-branch"} **Git Tag Deployments** - Deploy specific versions with automated tagging and n8n workflows

:icon{name="lucide:database"} **Database Wizardry** - Export, import, backup, and restore PostgreSQL databases with ease

:icon{name="lucide:blocks"} **Modular Architecture** - Clean separation of concerns with pluggable modules

:icon{name="lucide:webhook"} **Hook System** - Extend functionality with custom pre/post operation hooks

:icon{name="lucide:network"} **Network Maestro** - Smart network management with unified docker network

:icon{name="lucide:palette"} **Beautiful Output** - Color-coded logs and status indicators

:icon{name="lucide:wrench"} **Built-in Utilities** - Validation, cleanup, and initialization tools

## Core Features

### :icon{name="lucide:music"} Stack Management
- **Simple commands**: `up`, `down`, `restart`, `logs`, `status`, `deploy`
- **Bulk operations**: Execute commands across all stacks or specific selections
- **Status monitoring**: Visual feedback with color-coded success/failure indicators
- **Validation**: Built-in compose file validation
- **Complete lifecycle**: From initial setup to production deployment

### :icon{name="lucide:globe"} REST API Server ⭐
- **HTTP JSON API**: Full REST API for remote stack management
- **Auto-detection**: Automatically selects Python 3, socat, or netcat
- **CORS Support**: Ready for web frontend integration
- **Complete Coverage**: All Kompose features accessible via API
- **Production Ready**: Robust error handling, logging, and security
- **Easy Integration**: Client examples for JavaScript, TypeScript, Python

### :icon{name="lucide:tag"} Git Tag Deployments
- **Semantic Versioning**: Create and manage deployment tags (e.g., `frontend-v1.2.3-prod`)
- **Environment Targeting**: Deploy to dev, staging, or production
- **n8n Integration**: Trigger automated deployment workflows
- **Rollback Support**: Easy rollback to previous versions
- **Status Tracking**: Monitor deployment progress

### :icon{name="lucide:hard-drive"} Database Operations
- **Automated backups**: Export PostgreSQL databases with timestamped dumps
- **Smart restore**: Auto-detect or specify exact backup files
- **Compression**: Optional gzip compression for space efficiency
- **Multi-database**: Manage multiple databases (kompose, n8n, semaphore, gitea)
- **Shell access**: Interactive PostgreSQL shell for each database
- **Migrations**: Run database migrations and schema updates
- **Reset**: Safe database reset with automatic backup

### :icon{name="lucide:blocks"} Modular Architecture ⭐ NEW
- **Separation of concerns**: Each feature in its own module
- **Easy maintenance**: Update individual modules without touching core
- **Better testing**: Test modules in isolation
- **Extensibility**: Add new modules without modifying existing code

**Module Structure:**
```
kompose/
├── kompose.sh             # Main CLI entry point & router
├── kompose-stack.sh       # Stack management functions
├── kompose-db.sh          # Database operations
├── kompose-tag.sh         # Git tag deployments
├── kompose-api.sh         # REST API server management
├── kompose-utils.sh       # Utility functions (validate, cleanup, init)
└── kompose-api-server.sh  # REST API server implementation
```

### :icon{name="lucide:wrench"} Built-in Utilities ⭐ NEW
- **Initialization**: `kompose.sh init` - Set up environment and permissions
- **Validation**: `kompose.sh validate` - Check configuration integrity
- **Cleanup**: `kompose.sh cleanup` - Remove backup and temporary files
- **Version**: `kompose.sh version` - Display version and module information

All previously separate utility scripts are now integrated into the main CLI!

### :icon{name="lucide:network"} Network Management
- **Unified network**: All stacks communicate on the shared `kompose` network
- **Traefik integration**: Seamless reverse proxy setup
- **Multi-network support**: Special stacks can have additional internal networks
- **Automatic creation**: Network created during initialization

### :icon{name="lucide:settings"} Centralized Configuration
- **Domain configuration**: `domain.env` for centralized domain management
- **Secrets management**: Separate `secrets.env` for sensitive data
- **Environment layering**: Root `.env` + stack `.env` + secrets
- **Security**: Automatic .gitignore for secrets

## Quick Start

### Initialization
```bash
# Clone and initialize
git clone https://code.pivoine.art/valknar/kompose.git
cd kompose
./kompose.sh init

# Validate configuration
./kompose.sh validate
```

### Basic Stack Operations
```bash
# Start all stacks
./kompose.sh up

# Start specific stack
./kompose.sh up core

# View logs
./kompose.sh logs chain -f

# Stop stacks
./kompose.sh down home

# Show status
./kompose.sh status

# List all stacks
./kompose.sh list
```

### REST API Server
```bash
# Start API server (localhost only)
./kompose.sh api start

# Start on custom port
./kompose.sh api start 9000

# Check server status
./kompose.sh api status

# View logs
./kompose.sh api logs

# Test the API
curl http://localhost:8080/api/health | jq .
```

### Database Operations
```bash
# Backup all databases
./kompose.sh db backup

# Backup specific database with compression
./kompose.sh db backup -d postgres --compress

# List backups
./kompose.sh db list

# Show database status
./kompose.sh db status

# Restore from backup
./kompose.sh db restore -f backup.sql -d kompose

# Open database shell
./kompose.sh db shell -d kompose
```

### Git Tag Deployments
```bash
# Create and push deployment tag
./kompose.sh tag create -s frontend -e dev -v 1.2.3

# Deploy with tag creation
./kompose.sh tag deploy -s backend -e staging -v 2.0.0

# List all tags
./kompose.sh tag list

# List tags for specific service
./kompose.sh tag list -s frontend

# Rollback to previous version
./kompose.sh tag rollback -s api -e prod -v 1.0.5
```

### Utilities
```bash
# Validate entire configuration
./kompose.sh validate

# Clean up backup files
./kompose.sh cleanup

# Show version information
./kompose.sh version

# Display help
./kompose.sh help
```

## Architecture

Kompose manages stacks in a simple directory structure:

```
kompose/
├── kompose.sh              # Main CLI orchestrator
├── kompose-*.sh            # Feature modules
├── .env                    # Root environment (sources domain.env & secrets.env)
├── domain.env              # Centralized domain configuration
├── secrets.env             # Sensitive credentials (gitignored)
├── core/                   # Core services stack
│   ├── compose.yaml
│   └── .env
├── auth/                   # Authentication stack
│   ├── compose.yaml
│   └── .env
├── chain/                  # Automation stack
│   ├── compose.yaml
│   └── .env
├── home/                   # Smart home stack
│   ├── compose.yaml
│   └── .env
├── +custom/                # Custom user stacks
│   └── my-app/
├── +utility/               # System-level utilities
│   └── monitoring/
├── _migrations/            # One-time migration scripts
├── _archive/               # Deprecated/legacy scripts
└── backups/                # Database backups
    └── database/
```

### Stack Discovery
Kompose automatically discovers stacks by:
- Finding all directories with `compose.yaml` files
- Excluding special directories (`+custom`, `+utility`, `_*`, `backups`, etc.)
- Dynamically building the available stack list

### Configuration Hierarchy
1. **domain.env** - Centralized domain and subdomain definitions
2. **secrets.env** - Sensitive credentials and API keys
3. **.env** (root) - Global settings, sources domain.env and secrets.env
4. **stack/.env** - Stack-specific overrides

## Available Stacks

Kompose comes with a curated collection of production-ready stacks:

| Stack | Description |
|-------|-------------|
| **core** | Foundation services (MQTT, Redis, PostgreSQL) |
| **auth** | Authentication (Keycloak SSO, OAuth2 Proxy) |
| **kmps** | Kompose Management Portal (User & SSO Admin) |
| **chain** | Automation Platform (n8n, Semaphore/Ansible) |
| **home** | Smart Home (Home Assistant, Matter, Zigbee) |
| **vpn** | VPN Access (WireGuard with wg-easy) |
| **messaging** | Notifications (Gotify) |
| **proxy** | Reverse Proxy (Traefik with Let's Encrypt) |
| **+custom/** | Your custom stacks directory |
| **+utility/** | System-level utility services |

## Use Cases

### 1. Development Environment
```bash
# Initialize environment
./kompose.sh init

# Start development stacks
./kompose.sh up core auth chain

# Check logs
./kompose.sh logs chain -f

# Restart after code changes
./kompose.sh restart chain
```

### 2. Production Deployment
```bash
# Deploy tagged version
./kompose.sh tag deploy -s api -e prod -v 2.1.0

# Monitor via API
curl http://localhost:8080/api/stacks/api | jq .

# Quick rollback if needed
./kompose.sh tag rollback -s api -e prod -v 2.0.8
```

### 3. Database Management
```bash
# Daily backup with compression
./kompose.sh db backup --compress

# Before major update
./kompose.sh db backup -d kompose

# Check database status
./kompose.sh db status

# After update fails - restore
./kompose.sh db restore -f backups/database/kompose_20241012.sql.gz
```

### 4. Remote Management
```bash
# Start API server
./kompose.sh api start

# From web dashboard or scripts
curl -X POST http://localhost:8080/api/stacks/home/restart
curl http://localhost:8080/api/stacks/core/logs | jq -r '.data.logs'
curl http://localhost:8080/api/db/status | jq .
```

### 5. System Maintenance
```bash
# Validate all configuration
./kompose.sh validate

# Clean up old backups
./kompose.sh cleanup

# Check system status
./kompose.sh status
```

## Documentation Sections

### Getting Started
- [Installation Guide](/installation) - Set up Kompose 2.0 on your system
- [Quick Start](/guide/quick-start) - Get up and running in minutes
- [Migration Guide](/guide/migration) - Upgrade from 1.x to 2.0

### User Guide
- [Stack Management](/guide/stack-management) - Managing multiple stacks
- [API Server](/guide/api-server) - Remote control via REST API
- [Database Operations](/guide/database) - Backup and restore databases
- [Configuration](/guide/configuration) - Configure Kompose and stacks
- [Network Architecture](/guide/network) - Understanding networking
- [Dashboard Setup](/guide/dashboard-setup) - Build a web dashboard
- [Deployment Checklist](/guide/deployment-checklist) - Production deployment
- [Troubleshooting](/guide/troubleshooting) - Common issues and solutions

### Stack Reference
- [All Stacks](/stacks) - Detailed documentation for each stack

### Reference
- [CLI Reference](/reference/cli) - Complete command reference
- [Environment Variables](/reference/environment) - All configuration options
- [Quick Reference](/reference/quick-reference) - Cheat sheet for common tasks

## What's New in 2.0

### Major Changes
- ✨ **Modular Architecture**: Clean separation of features into dedicated modules
- ✨ **Built-in Utilities**: Integrated validation, cleanup, and initialization tools
- ✨ **Centralized Domain Management**: Single `domain.env` for all domain configuration
- ✨ **Improved Security**: Separate `secrets.env` with automatic .gitignore
- ✨ **REST API Server**: Complete HTTP JSON API for remote management
- ✨ **Enhanced Validation**: Comprehensive configuration checking
- ✨ **Better Documentation**: Updated guides for the new architecture
- ✨ **Migration Tools**: Automated migration from 1.x (moved to `_migrations/`)

### Removed/Deprecated
- ❌ Standalone `make-all-executable.sh` → Use `kompose.sh init`
- ❌ Standalone `validate-config.sh` → Use `kompose.sh validate`
- ❌ Standalone `cleanup-project.sh` → Use `kompose.sh cleanup`
- ❌ Standalone migration scripts → Moved to `_migrations/` directory
- ❌ Hardcoded domains → Use `domain.env` for centralized configuration

All deprecated scripts have been preserved in `_archive/` and `_migrations/` for reference.

See [CHANGELOG.md](/CHANGELOG.md) for complete version history.

## Community & Support

- **Documentation**: Comprehensive guides and references
- **Examples**: Production-ready integration examples
- **Issues**: Report bugs or request features on Gitea
- **Discussions**: Share your setups and ask questions

## License

Kompose is open source software. See [LICENSE](/LICENSE) for details.

---

Ready to get started? Check out the [Installation Guide](/installation) or jump to the [Quick Start Guide](/guide/quick-start).
