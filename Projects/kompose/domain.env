# ===================================================================
# KOMPOSE - Domain Configuration (Production)
# ===================================================================
# This file configures domain routing for production deployments
# Uses real domain names with Traefik routing and SSL
# For local development, these values are overridden in .env
# ===================================================================

# -------------------------------------------------------------------
# Root Domain Configuration
# -------------------------------------------------------------------
ROOT_DOMAIN=pivoine.art
BASE_DOMAIN=${ROOT_DOMAIN}

# SSL/TLS Configuration
ACME_EMAIL=valknar@pivoine.art

# -------------------------------------------------------------------
# Subdomain Configuration
# -------------------------------------------------------------------
# Define subdomains for all services
# Services will be accessible as https://subdomain.pivoine.art

# Core Infrastructure
SUBDOMAIN_PROXY=traefik
SUBDOMAIN_AUTH=auth

# Development & Automation
SUBDOMAIN_CODE=code              # Gitea
SUBDOMAIN_CHAIN=chain            # n8n
SUBDOMAIN_AUTO=auto              # Semaphore

# Content & Communication
SUBDOMAIN_BLOG=blog
SUBDOMAIN_DOCS=docs
SUBDOMAIN_NEWS=news
SUBDOMAIN_CHAT=chat              # Gotify
SUBDOMAIN_MAIL=mail              # Mailhog

# Data & Analytics
SUBDOMAIN_DATA=data
SUBDOMAIN_DASH=dash
SUBDOMAIN_TRACK=track            # Umami
SUBDOMAIN_TRACE=trace

# Applications
SUBDOMAIN_HOME=home              # Home Assistant
SUBDOMAIN_SEXY=sexy              # Directus
SUBDOMAIN_VAULT=vault            # Vaultwarden
SUBDOMAIN_LINK=link              # Linkwarden
SUBDOMAIN_DOCK=dock
SUBDOMAIN_MANAGE=manage          # KMPS

# Utilities
SUBDOMAIN_VPN=vpn
SUBDOMAIN_OAUTH2=oauth           # OAuth2 Proxy
SUBDOMAIN_ZIGBEE=zigbee          # Zigbee2MQTT

# Monitoring (Watch Stack)
SUBDOMAIN_PROMETHEUS=prometheus
SUBDOMAIN_GRAFANA=grafana
SUBDOMAIN_LOKI=loki
SUBDOMAIN_ALERTMANAGER=alerts

# -------------------------------------------------------------------
# Traefik Host Configuration (Production)
# -------------------------------------------------------------------
# Build full domain names from subdomain + root domain
# These are used in Traefik labels for routing

# Core Infrastructure Hosts
TRAEFIK_HOST_PROXY=${SUBDOMAIN_PROXY}.${ROOT_DOMAIN}
TRAEFIK_HOST_AUTH=${SUBDOMAIN_AUTH}.${ROOT_DOMAIN}

# Development & Automation Hosts
TRAEFIK_HOST_CODE=${SUBDOMAIN_CODE}.${ROOT_DOMAIN}
TRAEFIK_HOST_CHAIN=${SUBDOMAIN_CHAIN}.${ROOT_DOMAIN}
TRAEFIK_HOST_AUTO=${SUBDOMAIN_AUTO}.${ROOT_DOMAIN}

# Content & Communication Hosts
TRAEFIK_HOST_BLOG=${SUBDOMAIN_BLOG}.${ROOT_DOMAIN}
TRAEFIK_HOST_DOCS=${SUBDOMAIN_DOCS}.${ROOT_DOMAIN}
TRAEFIK_HOST_NEWS=${SUBDOMAIN_NEWS}.${ROOT_DOMAIN}
TRAEFIK_HOST_CHAT=${SUBDOMAIN_CHAT}.${ROOT_DOMAIN}
TRAEFIK_HOST_MAIL=${SUBDOMAIN_MAIL}.${ROOT_DOMAIN}

# Data & Analytics Hosts
TRAEFIK_HOST_DATA=${SUBDOMAIN_DATA}.${ROOT_DOMAIN}
TRAEFIK_HOST_DASH=${SUBDOMAIN_DASH}.${ROOT_DOMAIN}
TRAEFIK_HOST_TRACK=${SUBDOMAIN_TRACK}.${ROOT_DOMAIN}
TRAEFIK_HOST_TRACE=${SUBDOMAIN_TRACE}.${ROOT_DOMAIN}

# Application Hosts
TRAEFIK_HOST_HOME=${SUBDOMAIN_HOME}.${ROOT_DOMAIN}
TRAEFIK_HOST_SEXY=${SUBDOMAIN_SEXY}.${ROOT_DOMAIN}
TRAEFIK_HOST_VAULT=${SUBDOMAIN_VAULT}.${ROOT_DOMAIN}
TRAEFIK_HOST_LINK=${SUBDOMAIN_LINK}.${ROOT_DOMAIN}
TRAEFIK_HOST_DOCK=${SUBDOMAIN_DOCK}.${ROOT_DOMAIN}
TRAEFIK_HOST_MANAGE=${SUBDOMAIN_MANAGE}.${ROOT_DOMAIN}

# Utility Hosts
TRAEFIK_HOST_VPN=${SUBDOMAIN_VPN}.${ROOT_DOMAIN}
TRAEFIK_HOST_OAUTH2=${SUBDOMAIN_OAUTH2}.${ROOT_DOMAIN}
TRAEFIK_HOST_ZIGBEE=${SUBDOMAIN_ZIGBEE}.${ROOT_DOMAIN}

# Monitoring Hosts (Watch Stack)
WATCH_TRAEFIK_HOST_PROMETHEUS=${SUBDOMAIN_PROMETHEUS}.${ROOT_DOMAIN}
WATCH_TRAEFIK_HOST_GRAFANA=${SUBDOMAIN_GRAFANA}.${ROOT_DOMAIN}
WATCH_TRAEFIK_HOST_LOKI=${SUBDOMAIN_LOKI}.${ROOT_DOMAIN}
WATCH_TRAEFIK_HOST_ALERTMANAGER=${SUBDOMAIN_ALERTMANAGER}.${ROOT_DOMAIN}

# -------------------------------------------------------------------
# Stack-Specific Host Aliases
# -------------------------------------------------------------------
# Additional aliases for backward compatibility and clarity

# AUTH Stack
AUTH_OAUTH2_PROXY_HOST=${TRAEFIK_HOST_OAUTH2}

# CODE Stack
CODE_GITEA_TRAEFIK_HOST=${TRAEFIK_HOST_CODE}
GITEA_TRAEFIK_HOST=${TRAEFIK_HOST_CODE}

# CHAIN Stack
N8N_TRAEFIK_HOST=${TRAEFIK_HOST_CHAIN}
CHAIN_N8N_TRAEFIK_HOST=${TRAEFIK_HOST_CHAIN}
SEMAPHORE_TRAEFIK_HOST=${TRAEFIK_HOST_AUTO}
CHAIN_SEMAPHORE_TRAEFIK_HOST=${TRAEFIK_HOST_AUTO}

# KMPS Stack
KMPS_TRAEFIK_HOST=${TRAEFIK_HOST_MANAGE}

# LINK Stack
LINK_TRAEFIK_HOST=${TRAEFIK_HOST_LINK}

# MESSAGING Stack
MESSAGING_TRAEFIK_HOST_CHAT=${TRAEFIK_HOST_CHAT}
MESSAGING_TRAEFIK_HOST_MAIL=${TRAEFIK_HOST_MAIL}

# NEWS Stack
NEWS_TRAEFIK_HOST=${TRAEFIK_HOST_NEWS}

# SEXY Stack
SEXY_TRAEFIK_HOST=${TRAEFIK_HOST_SEXY}

# TRACK Stack
TRACK_TRAEFIK_HOST=${TRAEFIK_HOST_TRACK}

# VAULT Stack
VAULT_TRAEFIK_HOST=${TRAEFIK_HOST_VAULT}

# VPN Stack
VPN_TRAEFIK_HOST=${TRAEFIK_HOST_VPN}

# BLOG Stack
BLOG_TRAEFIK_HOST=${TRAEFIK_HOST_BLOG}

# Legacy alias for auth stack
TRAEFIK_HOST=${TRAEFIK_HOST_AUTH}
OAUTH2_PROXY_HOST=${TRAEFIK_HOST_OAUTH2}

# -------------------------------------------------------------------
# Production Deployment Notes
# -------------------------------------------------------------------
# 1. All services routed through Traefik reverse proxy
# 2. Automatic SSL certificates via Let's Encrypt
# 3. Services accessible at https://subdomain.pivoine.art
# 4. OAuth2 Proxy provides SSO for protected services
# 5. Database connections use internal container names
#
# DNS Configuration Required:
# - Create A or CNAME records for each subdomain
# - Point to your server's public IP address
# - Ensure ports 80 and 443 are accessible
#
# To use this configuration:
#   cp domain.env.production domain.env
#   cp .env.production .env
#   ./kompose.sh up proxy  # Start Traefik first
#   ./kompose.sh up        # Start remaining stacks
# ===================================================================
